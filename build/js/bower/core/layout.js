define(["dom","underscore","async","lib/app"],function(t,n,e,r){"use strict";function a(e,a){var o=t(e),u=o.data("lib_layout-template");return r.log("Layout rendering template...",[u,o.get(0)]),o.attr("data-lib_layout-rendered",!0),require(["txt!templates/"+u+".html"],function(e){var r=t(t.parseHTML(e.trim()));return d(o,r),n.isFunction(a)&&a(null,r)})}function o(n,o){var u=t(n).length&&t(n)||r.$root;e.each(u.find(".lib_layout[data-lib_layout-template]:not([data-lib_layout-rendered])"),a,o)}function u(e,a,o){var u=t(n.isString(a)?t.parseHTML(a.trim()):a);return d(r.$root.find('.lib_layout[data-lib_layout-block="'+e+'"]'),u),n.isFunction(o)&&o(null,u)}function i(t){return function(n){return u("content",n,t)}}function l(t){return r.log("Layout Changed",[t.get(0)]),t.trigger("lib/layout:changed"),p(t),o(t)}function d(e,r){var a=t(e).html(r),o=a.children();return n.each(o,function(n){var e=t(n);return l(e)})}function c(n,e){var r=t(e);return r.appendTo(n),l(r)}function f(n,e){var r=t(e);return r.prependTo(n),l(r)}r.log("Loaded");var p=n.debounce(function(t){r.trigger(t,"lib/layout:finished")},200);return{render:o,renderBlock:u,contentRenderer:i,html:d,append:c,prepend:f}});
//# sourceMappingURL=layout.js.map