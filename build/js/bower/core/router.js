define(["module","underscore","entity/route"],function(e,n,r){"use strict";function o(e){var o=t(e),a=o.pathname.split("/"),c=n.size(a),l=new r({controller:u.controllerName,action:u.actionName});return o.search.length&&l.query(o.search),2===c&&a[1].length?l.controller(a[1]):3===c&&(a[1].length&&l.controller(a[1]),a[2].length&&l.action(a[2])),l}function t(e){var r=document.createElement("a");return r.href=n.isString(e)&&e||"/",{hash:r.hash,hostname:r.hostname,href:r.href,pathname:["/",r.pathname].join("/").replace(new RegExp("^/+"),"/"),port:r.port,protocol:r.protocol,search:r.search}}function a(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function c(e,n){var r=new RegExp("[\\?&]"+a(n)+"=([^&#]*)"),o=r.exec(e);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function l(e){return e.replace(h,"")}function i(e){var n=l([e.controller(),e.action()].join("/")),r=e.query();return r&&(n=[n,r].join("")),n}var u=n.defaults(e.config(),{controllerName:"index",actionName:"index"}),h=new RegExp([["^",u.controllerName,"/",u.actionName,"$"].join(""),["/",u.actionName,"$"].join(""),["^",u.controllerName,"$"].join("")].join("|"));return{urlToRoute:o,routeToUrl:i,getQueryParam:c,cleanUrl:l}});
//# sourceMappingURL=router.js.map