function handleBlackBerryLocationTimeout(){-1!=bb_blackberryTimeout_id&&bb_error({message:"Timeout error",code:3})}function handleBlackBerryLocation(){if(clearTimeout(bb_blackberryTimeout_id),bb_blackberryTimeout_id=-1,bb_success&&bb_error){if(0==blackberry.location.latitude&&0==blackberry.location.longitude)bb_error({message:"Position unavailable",code:2});else{var e=null;blackberry.location.timestamp&&(e=new Date(blackberry.location.timestamp)),bb_success({timestamp:e,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb_success=null,bb_error=null}}!function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory"),-1!=e.getBuildInfo().indexOf("ie_mobile")&&e.privateSetGlobalObject(this)}catch(o){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(e=document.createElement("object"),e.style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e),e&&"undefined"==typeof e.create&&(e=null))}e&&(window.google||(google={}),google.gears||(google.gears={factory:e}))}}();var bb_success,bb_error,bb_blackberryTimeout_id=-1,geo_position_js=function(){var e={},o=null,t="undefined";return e.showMap=function(e,o){typeof blackberry!=t?blackberry.launch.newMap({latitude:1e5*e,longitude:1e5*-o}):window.location="http://maps.google.com/maps?q=loc:"+e+","+o},e.getCurrentPosition=function(e,t,i){o.getCurrentPosition(e,t,i)},e.init=function(){try{if(typeof geo_position_js_simulator!=t)o=geo_position_js_simulator;else if(typeof bondi!=t&&typeof bondi.geolocation!=t)o=bondi.geolocation;else if(typeof navigator.geolocation!=t)o=navigator.geolocation,e.getCurrentPosition=function(e,i,n){function a(o){e(typeof o.latitude!=t?{timestamp:o.timestamp,coords:{latitude:o.latitude,longitude:o.longitude}}:o)}o.getCurrentPosition(a,i,n)};else if(typeof window.blackberry!=t&&blackberry.location.GPSSupported){if(typeof blackberry.location.setAidMode==t)return!1;blackberry.location.setAidMode(2),e.getCurrentPosition=function(e,o,t){bb_success=e,bb_error=o,bb_blackberryTimeout_id=t.timeout?setTimeout("handleBlackBerryLocationTimeout()",t.timeout):setTimeout("handleBlackBerryLocationTimeout()",6e4),blackberry.location.onLocationUpdate("handleBlackBerryLocation()"),blackberry.location.refreshLocation()},o=blackberry.location}else"undefined"!=typeof window.google&&"undefined"!=typeof google.gears?(o=google.gears.factory.create("beta.geolocation"),e.getCurrentPosition=function(e,t,i){function n(o){e("undefined"!=typeof o.latitude?{timestamp:o.timestamp,coords:{latitude:o.latitude,longitude:o.longitude}}:o)}o.getCurrentPosition(n,t,i)}):typeof Mojo!=t&&"Mojo.Service.Request"!=typeof Mojo.Service.Request?(o=!0,e.getCurrentPosition=function(e,o,t){parameters={},t&&(t.enableHighAccuracy&&1==t.enableHighAccuracy&&(parameters.accuracy=1),t.maximumAge&&(parameters.maximumAge=t.maximumAge),t.responseTime&&(t.responseTime<5?parameters.responseTime=1:t.responseTime<20?parameters.responseTime=2:parameters.timeout=3)),r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(o){e({timestamp:o.timestamp,coords:{latitude:o.latitude,longitude:o.longitude,heading:o.heading}})},onFailure:function(e){o(1==e.errorCode?{code:3,message:"Timeout"}:2==e.errorCode?{code:2,message:"Position unavailable"}:{code:0,message:"Unknown Error: webOS-code"+errorCode})}})}):typeof device!=t&&typeof device.getServiceObject!=t&&(o=device.getServiceObject("Service.Location","ILocation"),e.getCurrentPosition=function(e,t){function i(o,i,n){4==i?t({message:"Position unavailable",code:2}):e({timestamp:null,coords:{latitude:n.ReturnValue.Latitude,longitude:n.ReturnValue.Longitude,altitude:n.ReturnValue.Altitude,heading:n.ReturnValue.Heading}})}var n=new Object;n.LocationInformationClass="BasicLocationInformation",o.ILocation.GetLocation(n,i)})}catch(i){return typeof console!=t&&console.log(i),!1}return null!=o},e}();
//# sourceMappingURL=geo.js.map